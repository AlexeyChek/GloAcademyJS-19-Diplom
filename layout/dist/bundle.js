(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.block=document.querySelector(e),this.button=document.querySelector(n)}var n,o;return n=t,(o=[{key:"toggle",value:function(){this.block.classList.toggle("header-contacts__phone-number-accord_active"),this.button.classList.toggle("header-contacts__arrow_active")}},{key:"run",value:function(){this.button.addEventListener("click",this.toggle.bind(this))}}])&&e(n.prototype,o),t}();function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const o=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.menu=document.querySelector(t),this.menuSelector=t,this.menuBtn=n,this.menuClose=o,this.isMenuOpen=!1}var t,o;return t=e,(o=[{key:"toggle",value:function(){this.menu.classList.toggle("popup-dialog-menu_active"),this.isMenuOpen=!this.isMenuOpen}},{key:"run",value:function(){var e=this;document.addEventListener("click",(function(t){var n=t.target;(n.closest(e.menuBtn)||e.isMenuOpen&&(!n.closest(e.menuSelector)||n.closest(e.menuClose)||n.closest("a")))&&e.toggle()}))}}])&&n(t.prototype,o),e}();function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popups=[],this.popup=-1}var t,n;return t=e,(n=[{key:"addPopup",value:function(e){var t,n=e.callerSelector,o=e.selector,i=e.activeClass,a=e.closeBtn;this.popups.push({callerSelector:(t=n,function(e){if(Array.isArray(e))return r(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),selector:document.querySelector(o),activeClass:i,closeBtn:a})}},{key:"togglePopup",value:function(e){var t=this;if(this.popup<0)for(var n=function(n){t.popups[n].callerSelector.forEach((function(o){if(e.closest(o))return t.popups[n].selector.classList.add(t.popups[n].activeClass),void(t.popup=n)}))},o=0;o<this.popups.length;o++)n(o);else e.closest(this.popups[this.popup].closeBtn)&&(this.popups[this.popup].selector.classList.remove(this.popups[this.popup].activeClass),this.popup=-1)}},{key:"run",value:function(){var e=this;document.addEventListener("click",(function(t){e.togglePopup(t.target)}))}}])&&i(t.prototype,n),e}();function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+d (ddd) ddd-dd-dd",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"7";u(this,e),this.elems=document.querySelectorAll(t),this.value="",this.mask=n,this.code=o}var t,n;return t=e,(n=[{key:"beginInput",value:function(e){0===e.value.length&&(e.value="+".concat(this.code," (")),this.value=e.value}},{key:"chekValue",value:function(e){(e=e.replace(/[^0-9]/g,"")).length>12&&(e=e.substr(0,11)),e[0]!==this.code&&(e=this.code+e);for(var t=this.mask,n=0;n<e.length;n++)t=t.replace("d",e[n]);return t.indexOf("d")>0&&(t=t.slice(0,t.indexOf("d"))),t.length>4&&(t=t.replace(/[^0-9]+$/,"")),t}},{key:"getValue",value:function(e){return e.length>this.value.length?(this.value=this.chekValue.call(this,e),this.value):e.length<4?(this.value="+".concat(this.code," ("),this.value):(this.value=e,this.value=this.chekValue.call(this,this.value),this.value)}},{key:"getMask",value:function(e){var t=e.value.length,n=e.selectionStart;e.value=this.getValue.call(this,e.value),t>n&&e.setSelectionRange(n,n)}},{key:"endInput",value:function(e){e.value.length<=4&&(e.value="")}},{key:"init",value:function(){var e=this;this.elems.forEach((function(t){t.addEventListener("focus",e.beginInput.bind(e,t)),t.addEventListener("input",e.getMask.bind(e,t)),t.addEventListener("blur",e.endInput.bind(e,t))}))}}])&&s(t.prototype,n),e}();new t(".header-contacts__phone-number-accord",".header-contacts__arrow").run(),new o(".popup-dialog-menu",".menu__icon",".close-menu").run(),document.addEventListener("click",(function(e){var t=e.target.closest(".button-footer")||e.target.closest(".popup-menu-nav a");if(t&&!t.closest(".popup-servises")){e.preventDefault();var n=t.getAttribute("href"),o=n?document.getElementById(n.substring(1)).getBoundingClientRect().top:0;window.scrollTo({top:o,behavior:"smooth"})}}));var c=new a;c.addPopup({callerSelector:[".popup-servises"],selector:".popup-repair-types",activeClass:"popup-active",closeBtn:".close"}),c.run(),new l('input[name="phone"]').init()})();