(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.block=document.querySelector(e),this.button=document.querySelector(n)}var n,i;return n=t,(i=[{key:"toggle",value:function(){this.block.classList.toggle("header-contacts__phone-number-accord_active"),this.button.classList.toggle("header-contacts__arrow_active")}},{key:"run",value:function(){this.button.addEventListener("click",this.toggle.bind(this))}}])&&e(n.prototype,i),t}();function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const i=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.menu=document.querySelector(t),this.menuSelector=t,this.menuBtn=n,this.menuClose=i,this.isMenuOpen=!1}var t,i;return t=e,(i=[{key:"toggle",value:function(){this.menu.classList.toggle("popup-dialog-menu_active"),this.isMenuOpen=!this.isMenuOpen}},{key:"run",value:function(){var e=this;document.addEventListener("click",(function(t){var n=t.target;(n.closest(e.menuBtn)||e.isMenuOpen&&(!n.closest(e.menuSelector)||n.closest(e.menuClose)||n.closest("a")))&&e.toggle()}))}}])&&n(t.prototype,i),e}();function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popups=[],this.popup=-1}var t,n;return t=e,(n=[{key:"addPopup",value:function(e){var t,n=e.callerSelector,i=e.selector,r=e.activeClass,s=e.closeBtn;this.popups.push({callerSelector:(t=n,function(e){if(Array.isArray(e))return o(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),selector:document.querySelector(i),activeClass:r,closeBtn:s})}},{key:"togglePopup",value:function(e){var t=this;if(this.popup<0)for(var n=function(n){t.popups[n].callerSelector.forEach((function(i){if(e.closest(i))return t.popups[n].selector.classList.add(t.popups[n].activeClass),void(t.popup=n)}))},i=0;i<this.popups.length;i++)n(i);else(e.closest(this.popups[this.popup].closeBtn)||e===this.popups[this.popup].selector)&&(this.popups[this.popup].selector.classList.remove(this.popups[this.popup].activeClass),this.popup=-1)}},{key:"run",value:function(){var e=this;document.addEventListener("click",(function(t){e.togglePopup(t.target)}))}}])&&r(t.prototype,n),e}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+d (ddd) ddd-dd-dd",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"7";a(this,e),this.elems=document.querySelectorAll(t),this.value="",this.mask=n,this.code=i}var t,n;return t=e,(n=[{key:"beginInput",value:function(e){0===e.value.length&&(e.value="+".concat(this.code," (")),this.value=e.value}},{key:"chekValue",value:function(e){(e=e.replace(/[^0-9]/g,"")).length>12&&(e=e.substr(0,11)),e[0]!==this.code&&(e=this.code+e);for(var t=this.mask,n=0;n<e.length;n++)t=t.replace("d",e[n]);return t.indexOf("d")>0&&(t=t.slice(0,t.indexOf("d"))),t.length>4&&(t=t.replace(/[^0-9]+$/,"")),t}},{key:"getValue",value:function(e){return e.length>this.value.length?(this.value=this.chekValue.call(this,e),this.value):e.length<4?(this.value="+".concat(this.code," ("),this.value):(this.value=e,this.value=this.chekValue.call(this,this.value),this.value)}},{key:"getMask",value:function(e){var t=e.value.length,n=e.selectionStart;e.value=this.getValue.call(this,e.value),t>n&&e.setSelectionRange(n,n)}},{key:"endInput",value:function(e){e.value.length<=4&&(e.value="")}},{key:"init",value:function(){var e=this;this.elems.forEach((function(t){t.addEventListener("focus",e.beginInput.bind(e,t)),t.addEventListener("input",e.getMask.bind(e,t)),t.addEventListener("blur",e.endInput.bind(e,t))}))}}])&&l(t.prototype,n),e}();function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const h=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"send-form-message-error";c(this,e),this.forms=document.querySelectorAll(t),this.errorClassName=n}var t,n;return t=e,(n=[{key:"getErorMesage",value:function(e){var t=document.createElement("div");return t.className=this.errorClassName,t.textContent=e,t}},{key:"validate",value:function(e){var t=this,n=e.querySelectorAll("input"),i=n.length;return n.forEach((function(e){if("checkbox"===e.getAttribute("type"))if(e.checked)i--;else{var n=t.getErorMesage.call(t,"Подтвердите согласие");e.insertAdjacentElement("afterend",n),setTimeout((function(){return n.remove()}),1e3)}if("name"===e.name)if(e.value.length>2)i--;else{var o=t.getErorMesage.call(t,"Введите коректное значение");e.insertAdjacentElement("afterend",o),setTimeout((function(){return o.remove()}),1e3)}if("phone"===e.name)if(e.value.length>17)i--;else{var r=t.getErorMesage.call(t,"Введите коректное значение");e.insertAdjacentElement("afterend",r),setTimeout((function(){return r.remove()}),1e3)}})),0===i}},{key:"sendForm",value:function(e){if(event.preventDefault(),this.validate.call(this,e)&&e.querySelector('[type="checkbox"]').checked){var t=new FormData(e),n={};t.forEach((function(e,t){n[t]=e})),this.postData(n).then((function(e){if(200!==e.status)throw new Error("status network not 200")})).catch((function(e){console.error(e)})).finally(e.querySelectorAll("input").forEach((function(e){return e.value=""})))}}},{key:"postData",value:function(e){return fetch("server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}},{key:"init",value:function(){var e=this;this.forms.forEach((function(t){t.querySelectorAll("input").forEach((function(e){return e.removeAttribute("required")})),t.addEventListener("submit",e.sendForm.bind(e,t))}))}}])&&p(t.prototype,n),e}();function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const v=function(){function e(t,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elems=document.querySelectorAll(t),this.activeClass=n,this.popupClass=i,this.popups=[],this.popupRevers=o}var t,n;return t=e,(n=[{key:"showHint",value:function(e,t){e.classList.add(this.activeClass),this.popups[t].getBoundingClientRect().y<0?this.popups[t].classList.add(this.popupRevers):this.popups[t].classList.remove(this.popupRevers)}},{key:"hideHint",value:function(e,t){e.classList.remove(this.activeClass),this.popups[t].classList.remove(this.popupRevers)}},{key:"init",value:function(){var e=this;this.elems.forEach((function(t,n){e.popups.push(t.querySelector(e.popupClass)),t.addEventListener("mouseover",e.showHint.bind(e,t,n)),t.addEventListener("mouseout",e.hideHint.bind(e,t,n))}))}}])&&f(t.prototype,n),e}();function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const m=function(){function e(t,n,i,o,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wrapper=document.querySelector(t),this.slider=document.querySelector(n),this.slide=document.querySelectorAll(i),this.prev=o,this.prevBtn=document.querySelector(o),this.next=r,this.nextBtn=document.querySelector(r),this.sliderWidth=0,this.position=0}var t,n;return t=e,(n=[{key:"updateSlider",value:function(){this.wrapper.style.overflow="hidden",this.sliderWidth=this.wrapper.offsetWidth,this.slider.style.width=this.sliderWidth*this.slide.length+"px",this.moveSlider()}},{key:"moveSlider",value:function(){this.slider.style.transform="translateX(-".concat(this.position*this.sliderWidth,"px)"),0===this.position?this.prevBtn.classList.add("unvisible"):this.prevBtn.classList.remove("unvisible"),this.position===this.slide.length-1?this.nextBtn.classList.add("unvisible"):this.nextBtn.classList.remove("unvisible")}},{key:"prevSlide",value:function(){this.position>0&&(this.position--,this.moveSlider.call(this))}},{key:"nextSlide",value:function(){this.position<this.slide.length-1&&(this.position++,this.moveSlider.call(this))}},{key:"init",value:function(){var e=this;this.updateSlider(),this.wrapper.addEventListener("click",(function(t){var n=t.target;n.closest(e.prev)&&e.prevSlide.call(e),n.closest(e.next)&&e.nextSlide.call(e)}))}}])&&d(t.prototype,n),e}();new t(".header-contacts__phone-number-accord",".header-contacts__arrow").run(),new i(".popup-dialog-menu",".menu__icon",".close-menu").run(),document.addEventListener("click",(function(e){var t=e.target.closest(".button-footer")||e.target.closest(".popup-menu-nav a");if(t&&!t.closest(".popup-servises")){e.preventDefault();var n=t.getAttribute("href"),i=n?document.getElementById(n.substring(1)).getBoundingClientRect().top:0;window.scrollTo({top:i,behavior:"smooth"})}}));var y=new s;y.addPopup({callerSelector:[".popup-servises"],selector:".popup-repair-types",activeClass:"popup-active",closeBtn:".close"}),y.addPopup({callerSelector:[".link-privacy"],selector:".popup-privacy",activeClass:"popup-active",closeBtn:".close"}),y.run(),new u('input[name="phone"]').init(),new h("form").init(),new v(".formula-item","active-item",".formula-item-popup","formula-item-popup_reverse").init(),new m(".formula-slider-wrap",".formula-slider",".formula-slider__slide","#formula-arrow_left","#formula-arrow_right").init()})();